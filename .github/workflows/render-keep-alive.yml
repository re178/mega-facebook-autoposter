name: Keep Render Alive Ultra-Adaptive

on:
  schedule:
    - cron: '*/5 * * * *'
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Ultra-adaptive silent keep-alive
        shell: bash
        run: |
          set +e   # ðŸ”‘ CRITICAL: disable fail-on-error completely

          URL="https://mega-facebook-autoposter.onrender.com"

          # Random main delay: 60â€“240s
          sleep $((RANDOM % 180 + 60))

          # Adaptive ping loop (never fails)
          for i in 1 2 3 4 5; do
            curl -s --max-time 10 "$URL" > /dev/null 2>&1 || true
            sleep $((RANDOM % 10 + 5))
          done

          # Secondary insurance ping
          sleep $((RANDOM % 15 + 10))
          curl -s --max-time 10 "$URL" > /dev/null 2>&1 || true

          # Tertiary insurance ping
          sleep $((RANDOM % 20 + 15))
          curl -s --max-time 10 "$URL" > /dev/null 2>&1 || true

          exit 0
