<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Page Dashboard</title>
  <link rel="stylesheet" href="css/style.css" />

  <!-- ADDITIVE: monitor animation -->
  <style>
    .monitor-line {
      white-space: nowrap;
      animation: slideIn 0.4s ease-out;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to   { transform: translateX(0); opacity: 1; }
    }

    .topic-badge {
      background: #222;
      color: #00ff99;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8rem;
    }
  </style>
</head>

<body>
<div class="layout">

  <!-- ================= SIDEBAR ================= -->
  <aside class="sidebar">
    <div class="brand"><span class="dot"></span><h2>MEGA CONTROL</h2></div>
    <nav class="nav" id="page-nav">
      <a data-page="overview" class="active">Overview</a>
      <a data-page="create-post">Create Post</a>
      <a data-page="page-logs">Logs</a>
      <hr />
      <a data-page="messaging-section">Messaging</a>
      <a data-page="analytics-section">Analytics</a>
      <a data-page="ads-section">Ads</a>
      <a data-page="manage-section">Manage</a>
      <a data-page="ai-scheduler-section">AI Post Scheduler</a>
    </nav>
  </aside>

  <!-- ================= MAIN ================= -->
  <main class="main">
    <div class="topbar">
      <h1 id="page-title">Page Dashboard</h1>
    </div>

    <!-- ================= AI POST SCHEDULER ================= -->
    <section class="card" id="ai-scheduler-section" style="display:none;">
      <h3>AI Post Scheduler</h3>

      <!-- -------- TOPIC INPUTS (UNCHANGED) -------- -->
      <div class="ai-topic-inputs">
        <label>Topic Name</label>
        <input type="text" id="ai-topic-name" placeholder="Enter topic">

        <label>Posts Per Day</label>
        <select id="ai-posts-per-day">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>

        <label>Times (HH:MM)</label>
        <div id="ai-times-container"></div>
        <button id="ai-add-time">Add Time</button>

        <label>Schedule Period</label>
        <input type="date" id="ai-start-date">
        to
        <input type="date" id="ai-end-date">

        <label>Repeat</label>
        <select id="ai-repeat-type">
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
        </select>

        <label>Include Media</label>
        <input type="checkbox" id="ai-include-media" checked>

        <div class="actions">
          <button id="ai-save-topic">Save Topic</button>
          <button id="ai-generate-post-now">Generate and Post Now</button>
          <button id="ai-delete-all-topic-posts">Delete Topic Posts</button>
          <button id="ai-clear-logs">Clear Logs</button>
        </div>
      </div>

      <!-- -------- NEW: SAVED TOPICS MANAGEMENT -------- -->
      <h4>Saved Topics</h4>
      <table>
        <thead>
          <tr>
            <th>Topic</th>
            <th>Posts / Day</th>
            <th>Schedule</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="ai-topics-table">
          <!-- injected by JS -->
        </tbody>
      </table>

      <!-- -------- UPCOMING / GENERATED POSTS -------- -->
      <h4>Upcoming & Generated Posts</h4>
      <table>
        <thead>
          <tr>
            <th>Topic</th>
            <th>Scheduled Time</th>
            <th>Text</th>
            <th>Media</th>
            <th>Status</th>
            <th>Actions</th>
            <th>Content Type</th>
          </tr>
        </thead>
        <tbody id="ai-upcoming-posts"></tbody>
      </table>

      <!-- -------- LOGS -------- -->
      <h4>Logs (Latest 5)</h4>
      <table>
        <thead>
          <tr>
            <th>Post</th>
            <th>Action</th>
            <th>Message</th>
            <th>Time</th>
            <th>Delete</th>
            <th>Retry</th>
          </tr>
        </thead>
        <tbody id="ai-logs"></tbody>
      </table>

      <!-- -------- AI MONITOR (ENHANCED, SAFE) -------- -->
      <h4>AI Operations Monitor</h4>
      <div id="ai-monitor-log"
           style="
            height:300px;
            overflow-y:auto;
            background:#0a0a0a;
            color:#fff;
            padding:10px;
            font-family:monospace;
            font-size:0.9rem;
            border-radius:6px;">
        <!-- logs appended here (unchanged ID) -->
      </div>

    </section>
  </main>
</div>

<!-- ================= SCRIPTS (UNCHANGED ORDER) ================= -->
<script src="js/api.js"></script>
<script src="js/page.js"></script>
<script src="js/page-features.js"></script>
<script src="js/pageAi.js"></script>

</body>
</html>
